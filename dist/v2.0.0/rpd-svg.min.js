/**
 * rpd - RPD is a minimal framework for building Node-Based User Interfaces, powered by Reactive Programming
 * Built at Tue, 19 Jul 2016 01:35:20 GMT
 *
 * @version v2.0.0
 * @link http://shamansir.github.io/rpd
 * @author Ulric Wilfred <shaman.sir@gmail.com>
 * @license MIT
 * 
 * Selected Renderers: svg
 * Selected Styles: quartz
 * Selected Toolkits: [None]
 * Selected I/O Modules: [None]
 * Selected Navigation Modules: [None]
 * d3.js or d3_tiny.js: d3_tiny.js
 *
 * User Styles: [None]
 * User Toolkits: [None]
 *
 * Command: gulp --renderer svg --style quartz --target-name rpd-svg --compilation simple
 */
(function(g){var e=g.Kefir;"undefined"===typeof e&&"undefined"!==typeof require&&(e=require("../vendor/kefir.min.js"));if(!e)throw Error("Kefir.js (https://github.com/rpominov/kefir) is required for Rpd to work");var a=function(){function p(c){return function(){return c}}function C(){var c=e.emitter();c.map(function(c){return{rule:c,func:function(t){t.render(c.aliases,c.targets,c.config)}}}).scan(function(c,t){c&&N["network/add-patch"].offValue(c.func);N["network/add-patch"].onValue(t.func);return t},
null).last().onValue(function(c){N["network/add-patch"].offValue(c.func)});return c}function n(c,d){x(c);var t=new u(c,d||c);N["network/add-patch"].emit(t);return t}function u(c,d){this.id=K();this.name=c;this.def=d||{};var t=this,b={"patch/is-ready":[],"patch/open":["parent"],"patch/close":[],"patch/move-canvas":["position"],"patch/resize-canvas":["size"],"patch/set-inputs":["inputs"],"patch/set-outputs":["outputs"],"patch/project":["node","target"],"patch/refer":["node","target"],"patch/add-node":["node"],
"patch/remove-node":["node"]};this.event=D(b);this.events=z(b,this.event,"patch",this);this.def.handle&&G(this.events,this.def.handle);this.renderQueue=e.emitter();b=e.combine([this.events],[this.renderQueue.scan(function(c,d){var b=d.alias,H=d.target,k=d.config,a=c[b];a||(a={},a.produce=W[b](t),a.handlers=[],c[b]=a);if(a.produce){var l=a.produce(H,k);l&&a.handlers.push("function"===typeof l?l:function(c){if(l[c.type])l[c.type](c)})}return c},{})]);b=b.bufferBy(this.renderQueue).take(1).flatten().concat(b);
b.onValue(function(c){var d=c[0];c=c[1];for(var t=Object.keys(c),b,H=0,k=t.length;H<k;H++){b=c[t[H]];b=b.handlers;for(var a=0,x=b.length;a<x;a++)b[a](O(l(d),t[H]))}});this.projections=e.emitter();e.combine([this.projections],[this.event["patch/set-inputs"],this.event["patch/set-outputs"]]).onValue(function(c){var d=c[0],b=c[1];c=c[2];for(var H,k=0;k<b.length;k++)H=d.addInlet(b[k].type,b[k].alias,b[k].def,b[k].render),H.event["inlet/update"].onValue(function(c){return function(d){c.receive(d)}}(b[k]));
for(k=0;k<c.length;k++)b=d.addOutlet(c[k].type,c[k].alias,c[k].def,c[k].render),c[k].event["outlet/update"].onValue(function(c){return function(d){c.send(d)}}(b));t.event["patch/project"].emit({node:d,target:d.patch});d.patch.event["patch/refer"].emit({node:d,target:t})});this.nodesToRemove=e.emitter();this.event["patch/is-ready"].emit()}function m(c,d,t,k,a){this.type=c||"core/basic";this.toolkit=P(c);this.id=K();this.patch=d;c={"node/turn-on":[],"node/is-ready":[],"node/process":["inlets","outlets"],
"node/turn-off":[],"node/add-inlet":["inlet"],"node/remove-inlet":["inlet"],"node/add-outlet":["outlet"],"node/remove-outlet":["outlet"],"node/move":["position"]};this.event=D(c);this.events=z(c,this.event,"node",this);(c=J(q[this.type],this))||A(this,"node","Node type '"+this.type+"' is not registered!");this.def=b(y,t,c);this.render=L(U,k,V(B[this.type],this));a&&a(this);var l=this;this.def.handle&&G(this.events,this.def.handle);if(this.def.process){var x=this.def.process;t=e.combine([this.event["node/add-inlet"].flatMap(function(c){var d=
c.event["inlet/update"].map(function(d){return{inlet:c,value:d}});l.def.tune&&(d=l.def.tune.bind(l)(d));return d})],[this.event["node/add-outlet"].scan(function(c,d){c[d.alias]=d;return c},{})]);t=t.bufferBy(this.event["node/is-ready"]).take(1).flatten().concat(t);t=t.scan(function(c,d){var b=d[0].inlet,t=b.alias;c.inlets.prev[t]=c.inlets.cur[t];c.inlets.cur[t]=d[0].value;c.outlets=d[1];c.source=b;return c},{inlets:{prev:{},cur:{}},outlets:{}}).changes();t=t.filter(function(c){return!c.source.def.cold});
t.onValue(function(c){var d=x.bind(l)(c.inlets.cur,c.inlets.prev);l.event["node/process"].emit({inlets:c.inlets.cur,outlets:d});c=c.outlets;for(var b in d)c[b]&&(d[b]instanceof e.Stream?c[b].stream(d[b]):c[b].send(d[b]))})}if(this.def.inlets){this.inlets={};for(var f in this.def.inlets)t=this.def.inlets[f],t=this.addInlet(t.type,f,t),this.inlets[f]=t}if(this.def.outlets)for(f in this.outlets={},this.def.outlets)t=this.def.outlets[f],t=this.addOutlet(t.type,f,t),this.outlets[f]=t;this.def.prepare&&
this.def.prepare.bind(this)(this.inlets,this.outlets);this.event["node/is-ready"].emit()}function g(c,H,t,k,a){this.type=c||"core/any";this.toolkit=P(c);this.id=K();this.alias=t;this.node=H;(c=J(I[this.type],this))||A(this,"inlet","Channel type '"+this.type+"' is not registered!");this.def=b(d,k,c);this.alias||E(this,"inlet","Inlet should have an alias");this.value=e.pool();this.render=L(Y,a,V(R[this.type],this));k={"inlet/update":["value"]};this.event=D(k);var l=this.event["inlet/update"];a=l.merge(this.value);
this.def.tune&&(a=this.def.tune.bind(this)(a));this.def.accept&&(a=a.flatten(function(c){if(this.def.accept(c))return[c];l.error({type:"inlet/error",system:!1,subject:this,message:void 0,silent:!0});return[]}.bind(this)));this.def.adapt&&(a=a.map(this.def.adapt));this.event["inlet/update"]=a.onValue(function(){});this.events=z(k,this.event,"inlet",this);this.def.handle&&G(this.events,this.def.handle)}function h(c,d,t,a,l){this.type=c||"core/any";this.toolkit=P(c);this.id=K();this.alias=t;this.node=
d;(c=J(I[this.type],this))||A(this,"outlet","Channel type '"+this.type+"' is not registered!");this.def=b(k,a,c);this.alias||E(this,"outlet","Outlet should have an alias");this.value=e.pool();this.render=L(Y,l,V(R[this.type],this));a={"outlet/update":["value"],"outlet/connect":["link","inlet"],"outlet/disconnect":["link"]};this.event=D(a);l=this.event["outlet/update"].merge(this.value);this.event["outlet/update"]=l.onValue(function(c){});this.events=z(a,this.event,"outlet",this);this.def.handle&&
G(this.events,this.def.handle);var x=this;e.combine([this.event["outlet/connect"]],[this.event["outlet/update"]]).onValue(function(c){x.value.plug(e.constant(c[1]))})}function f(c,d,b){this.id=K();this.name=b||"";this.outlet=c;this.inlet=d;this.value=e.emitter();var k=this;this.receiver=c.node.id!==d.node.id?function(c){k.pass(c)}:function(c){setTimeout(function(){k.pass(c)},0)};c={"link/enable":[],"link/disable":[],"link/pass":["value"]};this.event=D(c);b=this.event["link/pass"].merge(this.value);
this.event["link/pass"]=b.onValue(function(c){});this.events=z(c,this.event,"link",this);this.enabled=e.merge([this.event["link/disable"].map(p(!1)),this.event["link/enable"].map(p(!0))]).toProperty(p(!0));this.event["link/pass"].filterBy(this.enabled).onValue(function(c){d.receive(c)});e.combine([this.event["link/enable"]],[this.event["link/pass"]]).onValue(function(c){k.pass(c[1])})}function b(c,d,b){var k={};d=d||{};b=b||{};for(var a,l=0,x=c.length;l<x;l++)if(a=c[l],"*"!==a[0]){if(a in d||a in
b)k[a]=Q(d[a])?d[a]:b[a]}else if(a=a.slice(1),a in d||a in b){k[a]={};for(var f=b[a]?Object.keys(b[a]):[],B=0,U=f.length;B<U;B++)k[a][f[B]]=b[a][f[B]];f=d[a]?Object.keys(d[a]):[];B=0;for(U=f.length;B<U;B++)k[a][f[B]]=d[a][f[B]]}return k}function l(c){for(var d={},b=Object.keys(c),a=0,k=b.length;a<k;a++)d[b[a]]=c[b[a]];return d}function x(c){return"object"===typeof c}function Q(c){return"undefined"!==typeof c}function J(c,d){return c?"function"===typeof c?c(d):c:null}function V(c,d){if(!c)return{};
var b={},a;for(a in c)b[a]=J(c[a],d);return b}function L(c,d,a){if(!d)return a;var k={},l;for(l in a)k[l]=b(c,d[l],a[l]);for(l in d)k[l]||a[l]||(k[l]=d[l]);return k}function D(c){var d={};c=Object.keys(c);for(var b=0,a;b<c.length;b++)a=c[b],d[a]=e.emitter();return d}function F(c,d){if(0===d.length)return function(){return{type:c}};if(1===d.length)return function(b){var a={};a.type=c;a[d[0]]=b;return a};if(1<d.length)return function(d){d=l(d);d.type=c;return d}}function z(c,d,b,a){for(var k=e.pool(),
l=Object.keys(c),f=0;f<l.length;f++)k.plug(d[l[f]].map(F(l[f],c[l[f]])).map(function(c){c[b]=a;return c}));return k}function G(c,d){c.filter(function(c){return d[c.type]}).onValue(function(c){d[c.type](c)})}function E(c,d,b,a){X.plug(e.constantError({type:d+"/error",system:a||!1,subject:c,message:b}))}function A(c,d,b){E(c,d,b,!0)}function K(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function O(c,d){var b=c.type;if("patch/add-node"===b||"node/process"===b)c.render=c.node.render[d]||
{};else if("node/add-inlet"===b||"inlet/update"===b)c.render=c.inlet.render[d]||{};else if("node/add-outlet"===b||"outlet/update"===b)c.render=c.outlet.render[d]||{};return c}function P(c){var d=c.indexOf("/");return 0<=d?c.substring(0,d):""}function w(c,d){q[c]=d||{}}function r(c,d){I[c]=d||{}}(function(){e.emitter=function(){var c,d=e.stream(function(d){c=d;return function(){c=void 0}});d.emit=function(d){c&&c.emit(d);return this};d.error=function(d){c&&c.error(d);return this};d.end=function(){c&&
c.end();return this};d.emitEvent=function(d){c&&c.emitEvent(d);return this};return d.setName("emitter")}})();var q={},y="title *inlets *outlets prepare process tune *handle".split(" "),I={},d="label default hidden cold readonly allow accept adapt tune show *handle".split(" "),k=["label","tune","show","*handle"],B={},U=["prepare","size","first","always"],R={},Y=["prepare","show","edit"],Z={},S={},aa={},ba={},W={},ca={"network/add-patch":["patch"]},N=D(ca),X=z(ca,N,"network",a);N["network/add-patch"].onValue(function(c){X.plug(c.events)});
var T;u.prototype.render=function(c,d,b){c=Array.isArray(c)?c:[c];d=Array.isArray(d)?d:[d];for(var a=0,k=c.length,l;a<k;a++)for(var f=0,x=d.length,B;f<x;f++)l=c[a],B=d[f],W[l]||A(this,"patch","Renderer '"+l+"' is not registered"),this.renderQueue.emit({alias:l,target:B,config:b});return this};u.prototype.addNode=function(c,d,b,a){var k=this,l=b?b:x(d)?d||{}:{},f=x(d)?void 0:d;f&&(l.title=f);d=d&&x(d)?b:a;return new m(c,this,l,d,function(c){k.events.plug(c.events);k.event["patch/add-node"].emit(c);
c.turnOn()})};u.prototype.removeNode=function(c){c.turnOff();this.event["patch/remove-node"].emit(c);this.events.unplug(c.events)};u.prototype.open=function(c){this.event["patch/open"].emit(c);return this};u.prototype.close=function(){this.event["patch/close"].emit();return this};u.prototype.inputs=function(c){this.event["patch/set-inputs"].emit(c);return this};u.prototype.outputs=function(c){this.event["patch/set-outputs"].emit(c);return this};u.prototype.project=function(c){this.projections.emit(c);
return this};u.prototype.moveCanvas=function(c,d){this.event["patch/move-canvas"].emit([c,d]);return this};u.prototype.resizeCanvas=function(c,d){this.event["patch/resize-canvas"].emit([c,d]);return this};m.prototype.turnOn=function(){this.event["node/turn-on"].emit();return this};m.prototype.turnOff=function(){this.event["node/turn-off"].emit();return this};m.prototype.addInlet=function(c,d,b,a,k){var l=a?a:x(b)?b||{}:{},f=x(b)?void 0:b;f&&(l.label=f);b=b&&x(b)?a:k;c=new g(c,this,d,l,b);this.events.plug(c.events);
this.event["node/add-inlet"].emit(c);c.toDefault();return c};m.prototype.addOutlet=function(c,d,b,a,k){var l=a?a:x(b)?b||{}:{},f=x(b)?void 0:b;f&&(l.label=f);b=b&&x(b)?a:k;c=new h(c,this,d,l,b);this.events.plug(c.events);this.event["node/add-outlet"].emit(c);c.toDefault();return c};m.prototype.removeInlet=function(c){this.event["node/remove-inlet"].emit(c);this.events.unplug(c.events);return this};m.prototype.removeOutlet=function(c){this.event["node/remove-outlet"].emit(c);this.events.unplug(c.events);
return this};m.prototype.move=function(c,d){this.event["node/move"].emit([c,d]);return this};g.prototype.receive=function(c){this.value.plug(e.constant(c));return this};g.prototype.stream=function(c){this.value.plug(c);return this};g.prototype.toDefault=function(){Q(this.def.default)&&(this.def.default instanceof e.Stream?this.stream(this.def.default):this.receive(this.def.default));return this};g.prototype.allows=function(c){if("core/any"===this.type||c.type===this.type)return!0;if(!this.def.allow&&
c.type!==this.type)return!1;if(this.def.allow){var d=!1;this.def.allow.forEach(function(b){c.type===b&&(d=!0)});return d}return!0};h.prototype.connect=function(c){c.allows(this)||E(this,"outlet","Outlet of type '"+this.type+"' is not allowed to connect to inlet of type '"+c.type+"'");var d=new f(this,c);this.events.plug(d.events);this.value.onValue(d.receiver);this.event["outlet/connect"].emit({link:d,inlet:c});return d};h.prototype.disconnect=function(c){this.event["outlet/disconnect"].emit(c);this.value.offValue(c.receiver);
this.events.unplug(c.events);return this};h.prototype.send=function(c){this.value.plug(e.constant(c));return this};h.prototype.stream=function(c){this.value.plug(c);return this};h.prototype.toDefault=function(){Q(this.def.default)&&(this.def.default instanceof e.Stream?this.stream(this.def.default):this.send(this.def.default));return this};f.prototype.pass=function(c){this.value.emit(c);return this};f.prototype.enable=function(){this.event["link/enable"].emit();return this};f.prototype.disable=function(){this.event["link/disable"].emit();
return this};f.prototype.disconnect=function(){this.outlet.disconnect(this);return this};w("core/basic",{});w("core/reference",{});r("core/any",{});var M={patch:function(c){return"[ Patch"+(c.name?" '"+c.name+"'":" <Unnamed>")+" ]"},node:function(c){return"[ Node ("+c.type+")"+(c.def?c.def.title?" '"+c.def.title+"'":" <Untitled>":" <Unprepared>")+" #"+c.id+" ]"},outlet:function(c){return"[ Outlet ("+c.type+")"+(c.alias?" '"+c.alias+"'":" <Unaliased>")+(c.def?c.def.label?" '"+c.def.label+"'":" <Unlabeled>":
" <Unprepared>")+" #"+c.id+" ]"},inlet:function(c){return"[ Inlet ("+c.type+")"+(c.alias?" '"+c.alias+"'":" <Unaliased>")+(c.def?c.def.label?" '"+c.def.label+"'":" <Unlabeled>":" <Unprepared>")+" #"+c.id+(c.def.hidden?" (hidden)":"")+(c.def.cold?" (cold)":"")+" ]"},link:function(c){return"[ Link ("+c.type+") '"+c.name+"' #"+c.id+" "+M.outlet(c.outlet)+" -> "+M.inlet(c.inlet)+" ]"}};return{VERSION:"v2.0.0",_:{Patch:u,Node:m,Inlet:g,Outlet:h,Link:f},unit:p,not:function(c){return!c},event:N,events:X,
addPatch:function(c,d,b){return n(c,d).open(b)},addClosedPatch:n,renderNext:function(c,d,b){T||(T=C());T.emit({aliases:c,targets:d,config:b})},stopRendering:function(){T&&(T.end(),T=null)},nodetype:w,channeltype:r,nodedescription:function(c,d){Z[c]=d},renderer:function(c,d){W[c]=d},styles:S,style:function(c,d,b){S[c]||(S[c]={});S[c][d]=b},noderenderer:function(c,d,b){q[c]||A(null,"network","Node type '"+c+"' is not registered");B[c]||(B[c]={});B[c][d]=b},channelrenderer:function(c,d,b){I[c]||A(null,
"network","Channel type '"+c+"' is not registered");R[c]||(R[c]={});R[c][d]=b},toolkiticon:function(c,d){ba[c]=d},nodetypeicon:function(c,d){aa[c]=d},"import":{},"export":{},allNodeTypes:q,allChannelTypes:I,allNodeRenderers:B,allChannelRenderers:R,allNodeDescriptions:Z,allNodeTypeIcons:aa,allToolkitIcons:ba,getStyle:function(c,d){c||A(null,"network","Unknown style requested: '"+c+"'");S[c]||A(null,"network","Style '"+c+"' is not registered");var b=S[c][d];b||A(null,"network","Style '"+c+"' has no definition for '"+
d+"' renderer");return b},reportError:E,reportSystemError:A,short_uid:K,stringify:M,autoStringify:function(c){return c instanceof u?M.patch(c):c instanceof m?M.node(c):c instanceof g?M.inlet(c):c instanceof h?M.outlet(c):c instanceof f?M.link(c):"<?> "+c}}}();"function"===typeof define&&define.amd?(define([],function(){return a}),g.Rpd=a):"object"===typeof module&&"object"===typeof exports?(module.exports=a,a.Rpd=a):g.Rpd=a})(this);var d3_tiny=function(){function g(a,e,g){for(var n="function"===typeof e?e:function(){return e},u=a.selection,m=0,v=u.length;m<v;m++)g(u[m],n.bind(u[m])(m));return a}function e(a,e,g){e=e||document;selection="string"===typeof a?g?Array.prototype.slice.call(e.querySelectorAll(a),0):[e.querySelector(a)]:a instanceof Node?[a]:Array.isArray(a)?a:[a];this.namespace=1===selection.length&&selection[0]?selection[0].namespaceURI:null;this.selection=selection}e.prototype.empty=function(){return 1===this.selection.length&&
!this.selection[0]||!this.selection.length?!0:!1};e.prototype.attr=function(a,e){return"undefined"===typeof e&&1===this.selection.length?this.selection[0].getAttribute(a):g(this,e,function(e,n){e.setAttributeNS(null,a,n)})};e.prototype.property=function(a,e){return"undefined"===typeof e&&1===this.selection.length?this.selection[0][a]:g(this,e,function(e,n){e[a]=n})};e.prototype.style=function(a,e){"-"===a[0]&&(a=a.slice(1));a=a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()});return g(this,
e,function(e,n){e.style[a]=n})};e.prototype.text=function(a){return"undefined"===typeof a&&1===this.selection.length?this.selection[0].textContent||this.selection[0].innerText:g(this,a,function(a,e){a.innerText=a.textContent=e})};e.prototype.classed=function(a,e){return"object"===typeof a?g(this,Object.keys(a),function(e,n){for(var g=0,m=n.length;g<m;g++)e.classList.toggle(n[g],a[n[g]])}):g(this,e,function(e,g){e.classList.toggle(a,g)})};e.prototype.select=function(a){return new e(a,this.selection[0])};
e.prototype.selectAll=function(a){return new e(a,this.selection[0],!0)};e.prototype.append=function(a){var p=[];g(this,"string"===typeof a?document.createElementNS(this.namespace,a):a,function(a,e){a.appendChild(e);p.push(e)});return new e(p)};e.prototype.remove=function(){return g(this,function(){return null},function(a){a.parentElement.removeChild(a)})};e.prototype.node=function(a){return this.selection[a||0]};e.prototype.on=function(a,e){return g(this,function(){return e},function(e,g){e.addEventListener(a,
g)})};e.prototype.data=function(a){return a?g(this,a,function(a,e){a.__data__=e}):this.node().__data__};e.prototype.call=function(a){a(this);return this};return{ns:{prefix:{svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"}},select:function(a,g){return new e(a,g)},selectAll:function(a,g){return new e(a,g,!0)}}}();Rpd.Render=function(){function g(b){this.nodeRects=[];this.edgePadding=b.edgePadding||{horizontal:30,vertical:20};this.boxPadding=b.boxPadding||{horizontal:20,vertical:30}}function e(b,a){this.canvas=b;this.style=a}function a(b,a){this.link=b;this.style=a;this.element=this.styledLink=null}function p(){this.vlinks=[]}function C(b){b.stopPropagation();return b}function n(b){return{x:b.clientX,y:b.clientY}}function u(b,a,f,e){Kefir.fromEvents(b,"click").map(C).map(m(e||!1)).scan(Rpd.not).onValue(function(b){b?
a():f()})}var m=Rpd.unit,v=d3_tiny||v;g.DEFAULT_LIMITS=[1E3,1E3];g.prototype.nextPosition=function(b,a,f){f=f||g.DEFAULT_LIMITS;b=this.nodeRects;var e=this.boxPadding,h=this.edgePadding,n=a.width;a=a.height;var m=b.length?b[b.length-1]:null,m={x:m?m.x:h.horizontal,y:m?m.y+m.height+e.vertical:h.vertical,width:n,height:a};m.y+a+h.vertical>f.height&&(m.x=m.x+n+e.horizontal,m.y=h.vertical);b.push(m);return{x:m.x,y:m.y}};e.prototype.add=function(b,a){var f=this.canvas,e=this.style,h=a.start,g=a.end,m=
a.drag;Kefir.fromEvents(b.node(),"mousedown").map(n).map(e.getLocalPos).flatMap(function(a){var l=h(),m=a.x-l.x,p=a.y-l.y;a=Kefir.fromEvents(f.node(),"mousemove").map(C).takeUntilBy(Kefir.merge([Kefir.fromEvents(f.node(),"mouseup"),Kefir.fromEvents(b.node(),"mouseup")])).map(n).map(e.getLocalPos).map(function(b){return{x:b.x-m,y:b.y-p}}).toProperty(function(){return l});a.last().onValue(g);return a}).onValue(m)};a.prototype.construct=function(b){if(this.styledLink)throw Error("VLink is already constructed");
this.styledLink=b=this.style.createLink(this.link);this.element=v.select(b.element);return this};a.prototype.rotate=function(b,a,f,e){var h=this.style;b=h.getLocalPos({x:b,y:a});f=h.getLocalPos({x:f,y:e});this.styledLink.rotate(b.x,b.y,f.x,f.y);return this};a.prototype.rotateI=function(b,a,f){var e=this.style.getInletPos(f);return this.rotate(b,a,e.x,f.y)};a.prototype.rotateO=function(b,a,f){b=this.style.getOutletPos(b);return this.rotate(b.x,b.y,a,f)};a.prototype.rotateOI=function(b,a){var f=this.style,
e=f.getOutletPos(b),f=f.getInletPos(a);return this.rotate(e.x,e.y,f.x,f.y)};a.prototype.update=function(){if(this.link){var b=this.link;this.rotateOI(b.outlet,b.inlet);return this}};a.prototype.appendTo=function(b){b.append(this.element.node());return this};a.prototype.removeFrom=function(b){this.element.remove();return this};a.prototype.noPointerEvents=function(){this.styledLink.noPointerEvents&&this.styledLink.noPointerEvents();return this};a.prototype.listenForClicks=function(){var b=this.link;
u(this.element.node(),function(){b.enable()},function(){b.disable()});return this};a.prototype.enable=function(){this.element.classed("rpd-disabled",!1)};a.prototype.disable=function(){this.element.classed("rpd-disabled",!0)};a.prototype.get=function(){return this.link};a.prototype.getElement=function(){return this.element.node()};p.prototype.clear=function(){this.vlinks=[]};p.prototype.add=function(b){this.vlinks.push(b);return b};p.prototype.remove=function(b){this.vlinks=this.vlinks.filter(function(a){return a!==
b})};p.prototype.forEach=function(b){this.vlinks.forEach(b)};p.prototype.updateAll=function(){this.forEach(function(b){b.update()})};p.prototype.count=function(){return this.vlinks.length};p.prototype.getLast=function(){return this.count()?this.vlinks[this.vlinks.length-1]:null};var h=function(){var b={};return function(a,f,e){f.classed("rpd-error",!0);b[a]&&clearTimeout(b[a]);b[a]=setTimeout(function(){f.classed("rpd-error",!1);b[a]=null},e||1)}}(),f=function(){var b={};return function(a,f,e){f.classed("rpd-stale",
!1);f.classed("rpd-fresh",!0);b[a]&&clearTimeout(b[a]);b[a]=setTimeout(function(){f.classed("rpd-fresh",!1);f.classed("rpd-stale",!0);b[a]=null},e||1)}}();return{Placing:g,DragAndDrop:e,VLink:a,VLinks:p,mergeConfig:function(b,a){if(b){var f={};Object.keys(a).forEach(function(b){f[b]=a[b]});Object.keys(b).forEach(function(a){f[a]=b[a]});return f}return a},preventDefault:function(b){b.preventDefault();return b},stopPropagation:C,extractPos:n,addTarget:function(b){return function(a){return{pos:a,target:b}}},
addClickSwitch:u,addValueErrorEffect:h,addValueUpdateEffect:f,subscribeUpdates:function(b,a){a&&Object.keys(a).forEach(function(f){(function(a,f){b.event["node/add-inlet"].filter(function(a){return a.alias===f}).onValue(function(f){b.event["node/is-ready"].onValue(function(){a.default&&f.receive("function"===typeof a.default?a.default():a.default);if(a.valueOut)a.valueOut.onValue(function(a){f.receive(a)})})})})(a[f],f)})},reportErrorsToConsole:function(a){Rpd.events.onError(function(f){a.logErrors&&
(f.silent||(f.system?console.error(Error(f.type+" \u2014 "+f.message+". Subject: "+Rpd.autoStringify(f.subject))):console.log("Error:",f.type,"\u2014",f.message+". ","Subject: "+Rpd.autoStringify(f.subject),f.subject)))})}}}();Rpd.style("quartz","svg",function(g){function e(a){return document.createElementNS(n.ns.prefix.svg,a)}function a(a,b,e,h){var g=a+(e-a)/2;return"M"+a+" "+b+" C"+g+" "+b+" "+g+" "+h+" "+e+" "+h}function p(a,b,e,h,g,m,n,p){return"M"+a+","+b+(g?"v"+g+"a"+g+","+g+" 0 0 1 "+g+","+-g:"")+"h"+(e-(g?g:0)-(m?m:0))+(m?"a"+m+","+m+" 0 0 1 "+m+","+m:"")+"v"+(h-(m?m:0)-(n?n:0))+(n?"a"+n+","+n+" 0 0 1 "+-n+","+n:"")+"h"+((n?n:0)+(p?p:0)-e)+(p?"a"+p+","+p+" 0 0 1 "+-p+","+-p:"")+"v"+((p?p:0)+(g?g:0)-h)+"z"}function C(a){a=
a.getBoundingClientRect();return{x:a.left,y:a.top}}var n=n||d3_tiny,u=null,m={},v={},h={};return{edgePadding:{horizontal:30,vertical:20},boxPadding:{horizontal:20,vertical:30},createCanvas:function(a,b){return{element:n.select(e("g")).classed("rpd-patch",!0).node()}},createNode:function(a,b,h,g){function u(d,a,b){d=30+25*(Math.max(d,a)-1);return{width:b.width,height:21+Math.max(d,b.height)}}function v(){var d=k,a=u(q,y,L);if(a.width!==d.width||a.height!==d.height)O=8*G,P=8*E,w=O+a.width+P,r.select("path.rpd-header").attr("d",
p(0,0,w,21,2,2,0,0)),r.select("g.rpd-remove-button").attr("transform","translate("+(w-12)+",1)"),r.select("rect.rpd-shadow").attr("height",a.height).attr("width",w),r.select("rect.rpd-body").attr("height",a.height).attr("width",w),r.select("path.rpd-content").attr("d",p(0,21,w,a.height-21,0,0,2,2)),r.select("g.rpd-process").attr("transform","translate("+(O+D.x*a.width)+","+(21+(a.height-21)*D.y)+")"),r.select("g.rpd-outlets").attr("transform","translate("+w+",21)"),k=a}function C(){I.forEach(function(d,
a){var b,k;q>=y?(b=0,k=15+25*a):(b=0,k=(30+25*(y-1))/2+25*(-1*(q-1)/2+a));d.attr("transform","translate("+b+","+k+")")});d.forEach(function(d,a){var b,k;y>=q?(b=0,k=15+25*a):(b=0,k=(30+25*(q-1))/2+25*(-1*(y-1)/2+a));d.attr("transform","translate("+b+","+k+")")})}var L=b.size?{width:b.size.width||70,height:b.size.height||40}:{width:70,height:40},D=b.pivot||{x:.5,y:.5},F=a.def.inlets,z=a.def.outlets;b=u(F?Object.keys(F).length:0,z?Object.keys(z).length:0,L);var G=0,E=0;F&&Object.keys(F).forEach(function(d){G=
Math.max(G,F[d].label?F[d].label.length:d.length)});z&&Object.keys(z).forEach(function(d){E=Math.max(E,z[d].label?z[d].label.length:d.length)});g=b.width;var A=b.height,K=A-21,O=8*G,P=8*E,w=O+g+P,r=n.select(e("g")).attr("class","rpd-node");r.append("rect").attr("class","rpd-shadow").attr("width",w).attr("height",A).attr("x",5).attr("y",6).attr("rx",3).attr("ry",3);r.append("path").attr("class","rpd-header").classed("rpd-drag-handle",!0).attr("d",p(0,0,w,21,2,2,0,0));r.append("text").attr("class",
"rpd-name").text(a.def.title||a.type).attr("x",5).attr("y",6).style("pointer-events","none");r.append("path").attr("class","rpd-content").attr("d",p(0,21,w,K,0,0,2,2));r.append("rect").attr("class","rpd-body").attr("width",w).attr("height",A).attr("rx",2).attr("ry",2).style("pointer-events","none");r.select(".rpd-header").append(e("title")).text(h?h+" ("+a.type+")":a.type);r.append("g").attr("class","rpd-remove-button").attr("transform","translate("+(w-12)+",1)").call(function(d){d.append("path").attr("d",
p(0,0,11,11,2,2,2,3)).attr("class","rpd-remove-button-handle");d.append("text").text("x").attr("x",3).attr("y",2).style("pointer-events","none")});r.append("g").attr("class","rpd-inlets").attr("transform","translate(0,21)").data({position:{x:0,y:21}});r.append("g").attr("class","rpd-process").attr("transform","translate("+(O+D.x*g)+","+(21+(A-21)*D.y)+")");r.append("g").attr("class","rpd-outlets").attr("transform","translate("+w+",21)").data({position:{x:g,y:21}});r.classed("rpd-"+a.type.slice(0,
a.type.indexOf("/"))+"-toolkit-node",!0).classed("rpd-"+a.type.replace("/","-"),!0);var q=0,y=0,I=[],d=[],k=b;m[a.id]={inlet:function(d,a){G=Math.max(G,a.label?a.label.length:a.alias.length);q++;I.push(d);v();C()},outlet:function(a,b){E=Math.max(E,b.label?b.label.length:b.alias.length);y++;d.push(a);v();C()}};return{element:r.node(),size:b}},createInlet:function(a,b){var h=n.select(e("g")).attr("class","rpd-inlet");h.call(function(b){b.append("circle").attr("class","rpd-connector").attr("cx",0).attr("cy",
0).attr("r",2.5);b.append("g").attr("class","rpd-value-holder").attr("transform","translate(-8,0)").attr("text-anchor","end").append("text").attr("class","rpd-value");b.append("text").attr("class","rpd-name").text(a.def.label||a.alias).attr("x",10).attr("y",0)});m[a.node.id].inlet(h,a);v[a.id]=h.select(".rpd-connector");return{element:h.node()}},createOutlet:function(a,b){var g=n.select(e("g")).attr("class","rpd-outlet");g.call(function(b){b.append("circle").attr("class","rpd-connector").attr("cx",
0).attr("cy",0).attr("r",2.5);b.append("g").attr("class","rpd-value-holder").append("text").attr("class","rpd-value").attr("x",10).attr("y",0).style("pointer-events","none");b.append("text").attr("class","rpd-name").text(a.def.label||a.alias).attr("x",-10).attr("y",0)});m[a.node.id].outlet(g,a);h[a.id]=g.select(".rpd-connector");return{element:g.node()}},createLink:function(f){var b=n.select(e(g.linkForm&&"curve"==g.linkForm?"path":"line")).attr("class","rpd-link");return{element:b.node(),rotate:function(e,
f,h,m){g.linkForm&&"curve"==g.linkForm?b.attr("d",a(e,f,h,m)):b.attr("x1",e).attr("y1",f).attr("x2",h).attr("y2",m)},noPointerEvents:function(){b.style("pointer-events","none")}}},getInletPos:function(a){a=C(v[a.id].node());return{x:a.x+3,y:a.y+3}},getOutletPos:function(a){a=C(h[a.id].node());return{x:a.x+3,y:a.y+3}},getLocalPos:function(a){if(!u)return a;var b=C(u.node());return{x:a.x-b.x,y:a.y-b.y}},onPatchSwitch:function(a,b){u=n.select(b)},onNodeRemove:function(a){m[a.id]=null}}});(function(){function g(a){return document.createElementNS(m.ns.prefix.svg,a)}function e(e){return function(n,p){var w=V(p,u);v.reportErrorsToConsole(w);var r=Rpd.getStyle(w.style,"svg")(w);n=m.select(n).classed("rpd-network",!0).classed("rpd-full-page",w.fullPage);var q,y,I;return{"patch/is-ready":function(d){var b=m.select(document.documentElement);q=m.select(g("svg")).attr("width",n.property("clientWidth")).attr("height",n.property("clientHeight")).classed("rpd-canvas",!0);q.append("rect").attr("class",
"rpd-background");w.fullPage&&(q.attr("width","100%").attr("height",b.property("clientHeight")),q.select(".rpd-background").attr("width","100%").attr("height",b.property("clientHeight")));var f=q.append(r.createCanvas(e,n).element).classed("rpd-style-"+w.style,!0).classed("rpd-values-"+(w.valuesOnHover?"on-hover":"always-shown"),!0).classed("rpd-show-boxes",w.showBoxes).data(d.patch);h.patches[e.id]=q.data({canvas:f,width:b.property("clientWidth"),height:b.property("clientHeight"),patch:d.patch});
w.fullPage&&a(window,document,q,q.select(".rpd-background"));h.patchToPlacing[e.id]=new v.Placing(r);h.patchToLinks[e.id]=new J;y=new x(q,r,w);w.nodeMovingAllowed&&(I=new v.DragAndDrop(q,r));Kefir.fromEvents(q.node(),"selectstart").onValue(L)},"patch/open":function(a){(w.closeParent||w.fullPage)&&a.parent&&a.parent.close();f=a.patch;var b=h.patches[a.patch.id];n.append(b.node());h.patchToLinks[a.patch.id].updateAll();if(r.onPatchSwitch)r.onPatchSwitch(f,b.node())},"patch/close":function(a){f=null;
q.remove()},"patch/refer":function(a){var b=h.nodes[a.node.id];b.select(".rpd-node").classed("rpd-patch-reference",!0);b.data().processTarget.append(g("text")).text("["+(a.target.name||a.target.id)+"]");Kefir.fromEvents(b.data().processTarget.node(),"click").onValue(function(a,d){return function(){d.open(a)}}(e,a.target))},"patch/move-canvas":function(a){q.style("position","relative");q.style("top",Math.floor(a.position[0])+"px");q.style("left",Math.floor(a.position[1])+"px")},"patch/resize-canvas":function(a){q.attr("width",
a.size[0]);q.attr("height",a.size[1]);q.select(".rpd-background").attr("width","100%").attr("height","100%")},"patch/add-node":function(a){var k=a.node,q=a.render;a=h.patchToPlacing[a.patch.id];var n=h.patches[f.id].data(),p=m.select(g("g")).attr("class","rpd-node-box"),u=r.createNode(k,q,b[k.type],l[k.type]),y=p.append(u.element);h.nodes[k.id]=p.data({inletsTarget:y.select(".rpd-inlets"),outletsTarget:y.select(".rpd-outlets"),processTarget:y.select(".rpd-process"),position:v,size:u.size});var v=
a.nextPosition(k,u.size,{width:n.width,height:n.height});k.move(v.x,v.y);var x=new J;h.nodeToLinks[k.id]=x;if(w.nodeMovingAllowed){var z=y.select(".rpd-shadow"),v=y.select(".rpd-drag-handle");v.empty()||I.add(v,{start:function(){y.classed("rpd-dragging",!0);z.empty()||z.attr("x",7).attr("y",8);return p.data().position},drag:function(a){p.attr("transform","translate("+a.x+","+a.y+")");x.forEach(function(a){a.update()})},end:function(a){k.move(a.x,a.y);z.empty()||z.attr("x",5).attr("y",6);y.classed("rpd-dragging",
!1)}})}q.prepare&&q.prepare.bind(k)(h.patches[e.id].node(),h.patches[f.id].node());q.first&&A(k,q.first.bind(k)(y.select(".rpd-process").node()));if(q.always)k.event["node/process"].throttle(100).onValue(function(){x.updateAll()});if(!y.select(".rpd-remove-button").empty())Kefir.fromEvents(y.select(".rpd-remove-button-handle").node(),"click").map(D).onValue(function(){e.removeNode(k)});h.patches[k.patch.id].data().canvas.append(p.node())},"patch/remove-node":function(a){a=a.node;var b=h.nodes[a.id];
h.nodeToLinks[a.id].forEach(function(a){a.get().disconnect()});b.remove();if(r.onNodeRemove)r.onNodeRemove(a);h.nodes[a.id]=null;h.nodeToLinks[a.id]=null},"node/move":function(a){var b=h.nodes[a.node.id];a=a.position;b.attr("transform","translate("+Math.floor(a[0])+","+Math.floor(a[1])+")");b.data().position={x:a[0],y:a[1]}},"node/process":function(a){var b=a.node,e=a.render;if(e.always){var f=h.nodes[b.id].data().processTarget.node();e.always.bind(b)(f,a.inlets,a.outlets)}},"node/add-inlet":function(a){var b=
a.inlet;if(!b.def.hidden){var e=h.nodes[a.node.id].data().inletsTarget;a=a.render;var f;f=m.select(r.createInlet(b,a).element);f.classed("rpd-"+b.type.replace("/","-"),!0);f.classed({"rpd-stale":!0,"rpd-readonly":b.def.readonly||!1,"rpd-cold":b.def.cold||!1});var n=null;!b.def.readonly&&a.edit&&(n=new C(b,a,q,f.select(".rpd-value-holder"),f.select(".rpd-value"),m.select(g("g"))),f.select(".rpd-value-holder").append(n.editorElm.node()));h.inlets[b.id]=f.data({connector:f.select(".rpd-connector"),value:f.select(".rpd-value"),
vlinks:new J,editor:n});b.event["inlet/update"].onError(function(){G(b.id,f,w.effectTime)});y.subscribeInlet(b,f.select(".rpd-connector"));e.append(f.node())}},"node/add-outlet":function(a){var b=a.outlet,e=h.nodes[a.node.id].data().outletsTarget;a=m.select(r.createOutlet(b,a.render).element);a.classed("rpd-"+b.type.replace("/","-"),!0);a.classed("rpd-stale",!0);h.outlets[b.id]=a.data({connector:a.select(".rpd-connector"),value:a.select(".rpd-value"),vlinks:new J});y.subscribeOutlet(b,a.select(".rpd-connector"));
e.append(a.node())},"node/remove-inlet":function(a){a=a.inlet;h.inlets[a.id].data().vlinks.forEach(function(a){a.get().disconnect()});h.inlets[a.id].remove();if(r.onInletRemove)r.onInletRemove(a);h.inlets[a.id]=null},"node/remove-outlet":function(a){a=a.outlet;h.outlets[a.id].data().vlinks.forEach(function(a){a.get().disconnect()});h.outlets[a.id].remove();if(r.onOutletRemove)r.onOutletRemove(a);h.outlets[a.id]=null},"inlet/update":function(a){var b=a.inlet;if(!b.def.hidden){var e=a.render,f=h.inlets[b.id],
g=f.data().value;if(!g.empty()){var q=b.def.show?b.def.show(a.value):a.value;e.show?e.show.bind(b)(g.node(),a.value,q):g.text(q)}E(b.id,f,w.effectTime)}},"outlet/update":function(a){var b=a.outlet,e=a.render,f=h.outlets[b.id],g=f.data().value;if(!g.empty()){var q=b.def.show?b.def.show(a.value):a.value;e.show?e.show.bind(b)(g.node(),a.value,q):g.text(q)}E(b.id,f,w.effectTime)},"outlet/connect":function(a){a=a.link;var b=a.outlet,f=a.inlet,g=h.inlets[f.id],n=h.outlets[b.id].data(),g=g.data();if(!w.inletAcceptsMultipleLinks&&
1===g.vlinks.count())throw Error("Inlet is already connected to a link");g.editor&&g.editor.disable();var l=new Q(a,r);l.construct(w.linkWidth).rotateOI(b,f);m.select(l.getElement()).classed("rpd-"+f.type.replace("/","-"),!0).classed("rpd-"+b.type.replace("/","-"),!0);h.links[a.id]=l;n.vlinks.add(l);g.vlinks.add(l);h.nodeToLinks[b.node.id].add(l);b.node.id!==f.node.id&&h.nodeToLinks[f.node.id].add(l);h.patchToLinks[e.id].add(l);l.listenForClicks();l.appendTo(q)},"outlet/disconnect":function(a){a=
a.link;var b=h.links[a.id],f=a.outlet,g=a.inlet,l=h.outlets[f.id].data(),m=h.inlets[g.id].data();h.links[a.id]=null;l.vlinks.remove(b);m.vlinks.remove(b);h.nodeToLinks[f.node.id].remove(b);f.node.id!==g.node.id&&h.nodeToLinks[g.node.id].remove(b);h.patchToLinks[e.id].remove(b);b.removeFrom(q)},"link/enable":function(a){var b=h.inlets[a.link.inlet.id].data();b.editor&&b.editor.disable();h.links[a.link.id].enable()},"link/disable":function(a){h.links[a.link.id].disable()}}}}function a(a,b,e,f){Kefir.fromEvents(a,
"resize").map(function(){return a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight}).onValue(function(a){e.attr("height",a);f.attr("height",a);e.data().height=a});e.data().subscribedToResize=!0}function p(a,b){return Kefir.merge([a.map(n(!0)),b.map(n(!1))]).toProperty(n(!1))}function C(a,b,e,f,g,q){var l=Kefir.emitter(),m=Kefir.emitter();this.disableEditor=m;this.editorElm=q;this.valueElm=g;q.classed("rpd-value-editor",!0);b.edit.bind(a)(q.node(),a,l).onValue(function(b){a.receive(b)});
Kefir.combine([Kefir.merge([Kefir.fromEvents(f.node(),"click").map(D).map(n(!0)),Kefir.fromEvents(e.node(),"click").merge(m).map(n(!1))]).toProperty(n(!1)).skipDuplicates()],[a.event["inlet/update"]]).map(function(a){return{lastValue:a[1],startEditing:a[0],cancelEditing:!a[0]}}).onValue(function(b){if(b.startEditing){var e=h.inlets[a.id].data();e.link&&e.link.disable();l.emit(b.lastValue);f.classed("rpd-editor-enabled",!0)}else b.cancelEditing&&(g.classed("rpd-edited",!0),f.classed("rpd-editor-enabled",
!1))});f.classed("rpd-editor-disabled",!0)}var n=Rpd.unit,u={style:"quartz",fullPage:!1,valuesOnHover:!1,showBoxes:!1,nodeMovingAllowed:!0,inletAcceptsMultipleLinks:!1,closeParent:!1,logErrors:!0,effectTime:1E3},m=m||d3_tiny,v=Rpd.Render,h={patches:{},nodes:{},inlets:{},outlets:{},links:{},patchToPlacing:{},patchToLinks:{},nodeToLinks:{}},f,b=Rpd.allNodeDescriptions,l=Rpd.allNodeTypeIcons,x=function(){function a(b){return h.inlets[b.id].data().vlinks}function b(e){return function(){return 0<a(e).count()}}
function e(a){1===a.count()&&(a=a.getLast().link,a.outlet.disconnect(a))}function f(a,b){a.forEach(function(a){a.link.outlet.id===b.id&&b.disconnect(a.link)})}function g(a,b,e){this.canvas=a;this.style=b;this.config=e;this.canvasClicks=Kefir.fromEvents(this.canvas.node(),"click");this.inletClicks=Kefir.pool();this.outletClicks=Kefir.pool();this.startLink=Kefir.emitter();this.finishLink=Kefir.emitter();this.doingLink=p(this.startLink,this.finishLink)}g.prototype.subscribeOutlet=function(b,g){var h=
this.canvas,d=this.style,k=this.config,l=this.canvasClicks,r=this.outletClicks,u=this.inletClicks,v=this.startLink,x=this.finishLink,A=this.doingLink;r.plug(Kefir.fromEvents(g.node(),"click").map(F).map(z(b)));Kefir.fromEvents(g.node(),"click").map(D).filterBy(p(r,A)).map(F).onValue(function(g){v.emit();var p=(new Q(null,d)).construct(k.linkWidth).rotateO(b,g.x,g.y).noPointerEvents().appendTo(h);m.select(p.getElement()).classed("rpd-"+b.type.replace("/","-"),!0);Kefir.fromEvents(h.node(),"mousemove").takeUntilBy(Kefir.merge([u,
r.map(n(!1)),l.map(n(!1))]).take(1).onValue(function(d){if(d){d=d.target;var g=a(d);k.inletAcceptsMultipleLinks?f(g,b):e(g);b.connect(d)}})).map(F).onValue(function(a){p.rotateO(b,a.x,a.y)}).onEnd(function(){p.removeFrom(h);x.emit()})})};g.prototype.subscribeInlet=function(g,h){var l=this.canvas,d=this.style,k=this.config,r=this.canvasClicks,u=this.outletClicks,v=this.inletClicks,x=this.startLink,A=this.finishLink,C=this.doingLink;v.plug(Kefir.fromEvents(h.node(),"click").map(F).map(z(g)));Kefir.fromEvents(h.node(),
"click").map(D).filterBy(p(v,C)).filter(b(g)).onValue(function(b){var h=a(g).getLast().link,p=h.outlet;p.disconnect(h);x.emit();var y=(new Q(null,d)).construct(k.linkWidth).rotateO(p,b.x,b.y).noPointerEvents().appendTo(l);m.select(y.getElement()).classed("rpd-"+g.type.replace("/","-"),!0).classed("rpd-"+p.type.replace("/","-"),!0);Kefir.fromEvents(l.node(),"mousemove").takeUntilBy(Kefir.merge([v,u.map(n(!1)),r.map(n(!1))]).take(1).onValue(function(b){if(b){b=b.target;var d=a(b);k.inletAcceptsMultipleLinks?
f(d,p):e(d);p.connect(b)}})).map(F).onValue(function(a){y.rotateO(p,a.x,a.y)}).onEnd(function(){y.removeFrom(l);A.emit()})})};return g}();C.prototype.disable=function(){this.valueElm.classed("rpd-edited",!1);this.disableEditor.emit()};var Q=v.VLink,J=v.VLinks,V=v.mergeConfig,L=v.preventDefault,D=v.stopPropagation,F=v.extractPos,z=v.addTarget,G=v.addValueErrorEffect,E=v.addValueUpdateEffect,A=v.subscribeUpdates;Rpd.SvgRenderer=e;Rpd.renderer("svg",e)})();
